<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.31">

  <meta name="author" content="Author">
  <title>CSC477 - Fall 2024 – Presentation Title</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-2c1b5f745a11cfad616ebade4a4a7d24.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="Presentation Title – CSC477 - Fall 2024">
<meta property="og:site_name" content="CSC477 - Fall 2024">
<meta name="twitter:title" content="Presentation Title – CSC477 - Fall 2024">
<meta name="twitter:card" content="summary">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Presentation Title</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Author 
</div>
</div>
</div>

</section>
<section class="slide level2">


<img data-src="img/Lecture6_0.jpg" class="r-stretch"></section>
<section id="csc477-introduction-to-mobile-robotics" class="title-slide slide level1 center">
<h1>CSC477Introduction to Mobile Robotics</h1>

</section>

<section id="florian-shkurti" class="title-slide slide level1 center">
<h1>Florian Shkurti</h1>
<p>Week #6: Mapping</p>

<img data-src="img/Lecture6_1.png" class="r-stretch"></section>

<section id="todays-agenda" class="title-slide slide level1 center">
<h1>Today’s agenda</h1>
<p>How to represent maps</p>
<p>Probabilistic occupancy grid mapping</p>
</section>

<section id="categories-of-maps" class="title-slide slide level1 center">
<h1>Categories of maps</h1>
<ul>
<li class="fragment">Metric
<ul>
<li class="fragment">Map accurately represents lengths and angles</li>
</ul></li>
<li class="fragment">Topological
<ul>
<li class="fragment">Map is reduced to a graph representation of the structure of free space</li>
</ul></li>
<li class="fragment">Topometric
<ul>
<li class="fragment">Atlas: a combination of local metric maps (nodes) connected via edges</li>
</ul></li>
<li class="fragment">Sequence of raw time-series observations (e.g. video)
<ul>
<li class="fragment">No metric or topological information directly represented by the map # Typical operations on maps</li>
</ul></li>
</ul>
<p>Distance and direction to closest obstacle</p>
<p>Collision detection: is a given robot configuration in free space?</p>
<p>Map merging / alignment</p>
<p>Occupancy updates</p>
<p>Raytracing</p>
<p>Distance and direction to closest obstacle</p>
<p>Collision detection: is a given robot configuration in free space?</p>
<p>Map merging / alignment</p>
<p>Occupancy updates</p>
<p>Raytracing</p>
<p><span style="color:#ff0000">Common operations in </span></p>
<p><span style="color:#ff0000">computer graphics </span></p>
</section>

<section id="occupancy-grids" class="title-slide slide level1 center">
<h1>Occupancy Grids</h1>
<p><img data-src="img/Lecture6_2.png"></p>
<p><img data-src="img/Lecture6_3.gif"></p>
<p><img data-src="img/Lecture6_4.png"></p>
<p><img data-src="img/Lecture6_5.png"></p>
<p>Each cell contains either:</p>
<p>unknown/unexplored (grey)</p>
<p>probability of occupation</p>
<p><em>Advantages:</em></p>
<p><em>O(1) occupancy lookup and update</em></p>
<p><em>Supports image operations</em></p>
<p><span style="color:#ff0000">Disadvantages:</span></p>
<p><span style="color:#ff0000">Doesn’t scale well in higher dimensions</span></p>
<p><img data-src="img/Lecture6_6.png"></p>
<p><img data-src="img/Lecture6_7.gif"></p>
<p><img data-src="img/Lecture6_8.png"></p>
<p><img data-src="img/Lecture6_9.png"></p>
<p>Each cell contains either:</p>
<p>unknown/unexplored (grey)</p>
<p>probability of occupation</p>
</section>

<section id="quadtrees" class="title-slide slide level1 center">
<h1>Quadtrees</h1>
<p><img data-src="img/Lecture6_10.gif"></p>
<p><img data-src="img/Lecture6_11.png"></p>
<p><img data-src="img/Lecture6_12.png"></p>
<p>Each node represents a square. If the node is fully empty or fully occupied it has no children.</p>
<p>If it is partially occupied it has four children. Subdivision stops after some minimal square size.</p>
</section>

<section id="octrees" class="title-slide slide level1 center">
<h1>Octrees</h1>
<p><img data-src="img/Lecture6_13.jpg"></p>
<p><img data-src="img/Lecture6_14.jpg"></p>
<p>Each node represents a cube. If the node is fully empty or fully occupied it has no children.</p>
<p>If it is partially occupied it has eight children. Subdivision stops after some minimal cube size.</p>
<p><img data-src="img/Lecture6_15.jpg"></p>
<p><img data-src="img/Lecture6_16.jpg"></p>
<p><span style="color:#ff0000"> <em>Problem 1</em> </span> <span style="color:#ff0000">: quadtrees and octrees are not </span></p>
<p><span style="color:#ff0000">balanced trees. So, in the worst case an </span></p>
<p><span style="color:#ff0000">occupancy query could be O(n) in the </span></p>
<p><span style="color:#ff0000">number of nodes. </span></p>
<p>Each node represents a cube. If the node is fully empty or fully occupied it has no children.</p>
<p>If it is partially occupied it has eight children. Subdivision stops after some minimal cube size.</p>
<p><img data-src="img/Lecture6_17.jpg"></p>
<p><img data-src="img/Lecture6_18.jpg"></p>
<p><span style="color:#ff0000"> <em>Problem 1</em> </span> <span style="color:#ff0000">: quadtrees and octrees are not </span></p>
<p><span style="color:#ff0000">balanced trees. So, in the worst case an </span></p>
<p><span style="color:#ff0000">occupancy query could be O(n) in the </span></p>
<p><span style="color:#ff0000">number of nodes. </span></p>
<p><span style="color:#ff0000"> <em>Problem 2</em> </span> <span style="color:#ff0000">: quadtrees and octrees are </span></p>
<p><span style="color:#ff0000">sensitive to small changes in the location </span></p>
<p><span style="color:#ff0000">of obstacles.</span></p>
<p>Each node represents a cube. If the node is fully empty or fully occupied it has no children.</p>
<p>If it is partially occupied it has eight children. Subdivision stops after some minimal cube size.</p>
</section>

<section id="octree-example-octomap" class="title-slide slide level1 center">
<h1>Octree Example: Octomap</h1>

<img data-src="img/Lecture6_19.png" class="r-stretch"><p>Open source</p>
<p>as a ROS package</p>
</section>

<section id="implicit-surface-definitions-signed-distance-function" class="title-slide slide level1 center">
<h1>Implicit Surface Definitions: Signed Distance Function</h1>

<img data-src="img/Lecture6_20.jpg" class="r-stretch"><p><span style="color:#ff0000">This distance function</span></p>
<p><span style="color:#ff0000">is defined over any point</span></p>
<p><span style="color:#ff0000">in 3D space.</span></p>
</section>

<section id="sdf-example" class="title-slide slide level1 center">
<h1>SDF Example</h1>

<img data-src="img/Lecture6_21.png" class="r-stretch"></section>

<section id="pointclouds" class="title-slide slide level1 center">
<h1>Pointclouds</h1>
<p><img data-src="img/Lecture6_22.jpg"></p>
<p><img data-src="img/Lecture6_23.jpg"></p>
<p><em>Advantages:</em></p>
<p><em>can make local changes to the map</em></p>
<p>_ without affecting the _ <em>pointcloud</em> _ globally_</p>
<p><em>can align </em> <em>pointclouds</em> _ _</p>
<p><em>nearest neighbor queries are </em></p>
<p>_ easy with _ <em>kd</em> <em>-trees or locality-sensitive </em></p>
<p>_ hashing_</p>
<p><span style="color:#ff0000">Disadvantages:</span></p>
<p><span style="color:#ff0000">need to segment objects in the map</span></p>
<p><span style="color:#ff0000">raytracing is approximate and nontrivial </span></p>
<p>Topological Maps</p>
<p>Topology: study of spatial properties that are preserved under continuous deformations of the space.</p>
</section>

<section id="generalized-voronoi-graph-gvg" class="title-slide slide level1 center">
<h1>Generalized Voronoi Graph (GVG)</h1>
<p><img data-src="img/Lecture6_24.png"></p>
<p><img data-src="img/Lecture6_25.png"></p>
<p><em>GVG nodes: points that are equidistant to 3 or more obstacle points </em></p>
<p><span style="color:#ff0000">Retractions are </span></p>
<p><span style="color:#ff0000">also called </span></p>
<p><span style="color:#ff0000">roadmaps.</span></p>
<p><img data-src="img/Lecture6_26.png"></p>
<p><img data-src="img/Lecture6_27.png"></p>
<p>Turns comparison between pixels to comparison between graphs.</p>
</section>

<section id="gvg-sensitivity" class="title-slide slide level1 center">
<h1>GVG: sensitivity</h1>

<img data-src="img/Lecture6_28.png" class="r-stretch"></section>

<section id="gvg-advantages" class="title-slide slide level1 center">
<h1>GVG: advantages</h1>
<p><img data-src="img/Lecture6_29.png"></p>
<p><span style="color:#ff0000">Can specify whether we pass on the “left” or “right” of each obstacle</span></p>
<p><span style="color:#ff0000">on our way to the goal.</span></p>
<p><img data-src="img/Lecture6_30.png"></p>
</section>

<section id="how-a-curve-winds-around-an-obstacle" class="title-slide slide level1 center">
<h1>How a curve winds around an obstacle</h1>
<p><img data-src="img/Lecture6_31.png"></p>
<p><img data-src="img/Lecture6_32.png"></p>
<p><span style="color:#ff0000">Note: winding angle of a path </span></p>
<p><span style="color:#ff0000">can be more than 360 degrees </span></p>
</section>

<section id="homotopy-classes" class="title-slide slide level1 center">
<h1>Homotopy classes</h1>
<p>Two paths with the same endpoints</p>
<p>are homotopic or belong to the same</p>
<p>homotopy class iff one can be deformed</p>
<p>continuously (without hitting obstacles)</p>
<p>into the other. Formally, the paths:</p>
<p>with</p>
<p>are homotopic iff there exists a continuous</p>
<p>function</p>
<p>such that for any time t:</p>
<p><img data-src="img/Lecture6_33.png"></p>
<p><img data-src="img/Lecture6_34.png"></p>
<p><img data-src="img/Lecture6_35.png"></p>
<p><img data-src="img/Lecture6_36.png"></p>
<p><img data-src="img/Lecture6_37.png"></p>
<p><img data-src="img/Lecture6_38.png"></p>
<p><img data-src="img/Lecture6_39.png"></p>
<p><img data-src="img/Lecture6_40.png"></p>
</section>

<section id="homotopy-functions-for-deformations" class="title-slide slide level1 center">
<h1>Homotopy functions for deformations</h1>
<p>Two paths with the same endpoints</p>
<p>are homotopic or belong to the same</p>
<p>homotopy class iff one can be deformed</p>
<p>continuously (without hitting obstacles)</p>
<p>into the other. Formally, the paths:</p>
<p>with</p>
<p>are homotopic iff there exists a continuous</p>
<p>function</p>
<p>such that for any time t:</p>
<p><img data-src="img/Lecture6_41.png"></p>
<p><img data-src="img/Lecture6_42.png"></p>
<p><img data-src="img/Lecture6_43.png"></p>
<p><img data-src="img/Lecture6_44.png"></p>
<p><img data-src="img/Lecture6_45.png"></p>
<p><img data-src="img/Lecture6_46.png"></p>
<p><img data-src="img/Lecture6_47.png"></p>
<p><img data-src="img/Lecture6_48.png"></p>
<p><img data-src="img/Lecture6_49.png"></p>
<p><img data-src="img/Lecture6_50.png"></p>
<p><img data-src="img/Lecture6_51.png"></p>
<p><img data-src="img/Lecture6_52.png"></p>
<p><img data-src="img/Lecture6_53.png"></p>
<p><img data-src="img/Lecture6_54.png"></p>
<p><img data-src="img/Lecture6_55.png"></p>
</section>

<section id="topometric-maps" class="title-slide slide level1 center">
<h1>Topometric maps</h1>
<p><img data-src="img/Lecture6_56.jpg"></p>
<p>Edges: rotations and</p>
<p>translations between</p>
<p>local maps, but also topological</p>
<p>connectivity</p>
<p><img data-src="img/Lecture6_57.png"></p>
<p>Local,</p>
<p>metric map</p>
<p>Local,</p>
<p>metric map</p>
<p>Local,</p>
<p>metric map</p>
<p>Main advantage:</p>
<p>allows us combine accurate local</p>
<p>maps into a global, __ typically __</p>
<p><strong>inconsistent </strong> map that nevertheless</p>
<p>provides sufficient navigation information.</p>
<p>Local,</p>
<p>metric map</p>
<p>Maps of Raw Observations</p>
</section>

<section id="main-idea" class="title-slide slide level1 center">
<h1>Main Idea</h1>
<ul>
<li class="fragment">Map = entire (unprocessed) sequence of observations, e.g. video.</li>
<li class="fragment">Do not try to support distance, collision, and raytracing queries.</li>
<li class="fragment">Instead, provide only a similarity/nearest neighbors query
<ul>
<li class="fragment">“Find the image in the video that is most similar to the one I’m seeing now.”</li>
</ul></li>
<li class="fragment">History of observations determines a (set of) location(s) in the map Metric Map Alignment</li>
</ul>
<p>a.k.a. scan matching, a.k.a. iterative closest point (ICP), a.k.a. registration</p>
</section>

<section id="problem-definition" class="title-slide slide level1 center">
<h1>Problem definition</h1>
<ul>
<li class="fragment">Given
<ul>
<li class="fragment">two pointclouds or</li>
<li class="fragment">a (local) laser scan and a pointcloud (global map) or</li>
<li class="fragment">two maps</li>
</ul></li>
<li class="fragment">find the rotation and translation that aligns them</li>
</ul>
<p><img data-src="img/Lecture6_58.png"></p>
<ul>
<li class="fragment">Given
<ul>
<li class="fragment">two pointclouds or</li>
<li class="fragment">a (local) laser scan and a pointcloud (global map) or</li>
<li class="fragment">two maps</li>
</ul></li>
<li class="fragment">find the rotation and translation that aligns them</li>
<li class="fragment">Assumption: We are assuming in these slides for simplicity that that rigid-body transformations are sufficient to align the scans. They might not be. We might need to also model scaling, non-uniform stretching and other nonlinear transformations.</li>
</ul>
<p><img data-src="img/Lecture6_59.png"></p>
</section>

<section id="scan-alignment-with-known-correspondences" class="title-slide slide level1 center">
<h1>Scan alignment with known correspondences</h1>
<p><img data-src="img/Lecture6_60.png"></p>
<p><img data-src="img/Lecture6_61.png"></p>
<p><img data-src="img/Lecture6_62.png"></p>
<p><img data-src="img/Lecture6_63.png"></p>
<p><img data-src="img/Lecture6_64.png"></p>
<p><img data-src="img/Lecture6_65.png"></p>
<p><img data-src="img/Lecture6_66.png"></p>
<p><img data-src="img/Lecture6_67.png"></p>
<p><img data-src="img/Lecture6_68.png"></p>
<p><img data-src="img/Lecture6_69.png"></p>
<p><img data-src="img/Lecture6_70.png"></p>
<p><img data-src="img/Lecture6_71.png"></p>
<p><img data-src="img/Lecture6_72.png"></p>
<p><img data-src="img/Lecture6_73.png"></p>
<p><img data-src="img/Lecture6_74.png"></p>
<p><img data-src="img/Lecture6_75.png"></p>
<p><img data-src="img/Lecture6_76.png"></p>
<p>When correct correspondences</p>
<p>are known we say that <strong>data </strong></p>
<p><strong>association</strong> is known/unambiguous.</p>
<p><img data-src="img/Lecture6_77.png"></p>
<p><img data-src="img/Lecture6_78.png"></p>
<p><img data-src="img/Lecture6_79.png"></p>
<p><img data-src="img/Lecture6_80.png"></p>
<p>In general, data association is a real</p>
<p>and hairy problem in robotics.</p>
<p><img data-src="img/Lecture6_81.png"></p>
<p>Find the 3D rotation matrix R and the 3D translation</p>
<p>vector t that will best align the corresponding points</p>
<p><img data-src="img/Lecture6_82.png"></p>
<p><img data-src="img/Lecture6_83.png"></p>
<p><img data-src="img/Lecture6_84.png"></p>
<p><img data-src="img/Lecture6_85.png"></p>
<p><img data-src="img/Lecture6_86.png"></p>
<p><img data-src="img/Lecture6_87.png"></p>
<p><img data-src="img/Lecture6_88.png"></p>
<p><img data-src="img/Lecture6_89.png"></p>
<p><img data-src="img/Lecture6_90.png"></p>
<p><img data-src="img/Lecture6_91.png"></p>
<p><img data-src="img/Lecture6_92.png"></p>
<p><img data-src="img/Lecture6_93.png"></p>
<p><img data-src="img/Lecture6_94.png"></p>
<p>Find the 3D rotation matrix R and the 3D translation</p>
<p>vector t that will best align the corresponding points</p>
<p><img data-src="img/Lecture6_95.png"></p>
<p><img data-src="img/Lecture6_96.png"></p>
<p><img data-src="img/Lecture6_97.png"></p>
<p><img data-src="img/Lecture6_98.png"></p>
<p><img data-src="img/Lecture6_99.png"></p>
<p><img data-src="img/Lecture6_100.png"></p>
<p><img data-src="img/Lecture6_101.png"></p>
<p><img data-src="img/Lecture6_102.png"></p>
<p><img data-src="img/Lecture6_103.png"></p>
<p><img data-src="img/Lecture6_104.png"></p>
<p><img data-src="img/Lecture6_105.png"></p>
<p><img data-src="img/Lecture6_106.png"></p>
<p><img data-src="img/Lecture6_107.png"></p>
<p><span style="color:#ff0000">Q: How do we minimize this error?</span></p>
<p><span style="color:#ff0000">A: Turns out it has a closed-form solution. </span></p>
</section>

<section id="closed-form-solution-of-scan-alignment-with-known-correspondences" class="title-slide slide level1 center">
<h1>Closed form solution of scan alignment with known correspondences</h1>
<p>Find the 3D rotation matrix R and the 3D translation</p>
<p>vector t that will best align the corresponding points</p>
<p><img data-src="img/Lecture6_108.png"></p>
<p><img data-src="img/Lecture6_109.png"></p>
<p><img data-src="img/Lecture6_110.png"></p>
<p><img data-src="img/Lecture6_111.png"></p>
<p><img data-src="img/Lecture6_112.png"></p>
<p><img data-src="img/Lecture6_113.png"></p>
<p><img data-src="img/Lecture6_114.png"></p>
<p><img data-src="img/Lecture6_115.png"></p>
<p><img data-src="img/Lecture6_116.png"></p>
<p>Step 1: compute the means of the two scans</p>
<p><img data-src="img/Lecture6_117.png"></p>
<p><img data-src="img/Lecture6_118.png"></p>
<p><img data-src="img/Lecture6_119.png"></p>
<p><img data-src="img/Lecture6_120.png"></p>
<p><img data-src="img/Lecture6_121.png"></p>
<p><img data-src="img/Lecture6_122.png"></p>
<p>Step 2: subtract the means from the scans</p>
<p><img data-src="img/Lecture6_123.png"></p>
<p><img data-src="img/Lecture6_124.png"></p>
<p>Step 3: form the matrix</p>
<p><img data-src="img/Lecture6_125.png"></p>
<p>Find the 3D rotation matrix R and the 3D translation</p>
<p>vector t that will best align the corresponding points</p>
<p><img data-src="img/Lecture6_126.png"></p>
<p><img data-src="img/Lecture6_127.png"></p>
<p><img data-src="img/Lecture6_128.png"></p>
<p><img data-src="img/Lecture6_129.png"></p>
<p><img data-src="img/Lecture6_130.png"></p>
<p><img data-src="img/Lecture6_131.png"></p>
<p><img data-src="img/Lecture6_132.png"></p>
<p><img data-src="img/Lecture6_133.png"></p>
<p><img data-src="img/Lecture6_134.png"></p>
<p>Step 1: compute the means of the two scans</p>
<p><img data-src="img/Lecture6_135.png"></p>
<p><img data-src="img/Lecture6_136.png"></p>
<p><img data-src="img/Lecture6_137.png"></p>
<p><img data-src="img/Lecture6_138.png"></p>
<p><img data-src="img/Lecture6_139.png"></p>
<p><img data-src="img/Lecture6_140.png"></p>
<p>Step 2: subtract the means from the scans</p>
<p>Step 4: compute the SVD of the matrix W</p>
<p><img data-src="img/Lecture6_141.png"></p>
<p><img data-src="img/Lecture6_142.png"></p>
<p><img data-src="img/Lecture6_143.png"></p>
<p>Step 3: form the matrix</p>
<p>Step 5: if rank(W)=3, optimal solution is unique:</p>
<p><img data-src="img/Lecture6_144.png"></p>
<p><img data-src="img/Lecture6_145.png"></p>
<p><img data-src="img/Lecture6_146.png"></p>
<p>Find the 3D rotation matrix R and the 3D translation</p>
<p>vector t that will best align the corresponding points</p>
<p><img data-src="img/Lecture6_147.png"></p>
<p><img data-src="img/Lecture6_148.png"></p>
<p><img data-src="img/Lecture6_149.png"></p>
<p><img data-src="img/Lecture6_150.png"></p>
<p><img data-src="img/Lecture6_151.png"></p>
<p><img data-src="img/Lecture6_152.png"></p>
<p><img data-src="img/Lecture6_153.png"></p>
<p><img data-src="img/Lecture6_154.png"></p>
<p><img data-src="img/Lecture6_155.png"></p>
<p><img data-src="img/Lecture6_156.png"></p>
<p><img data-src="img/Lecture6_157.png"></p>
<p><img data-src="img/Lecture6_158.png"></p>
<p><img data-src="img/Lecture6_159.png"></p>
<p>If you’re interested, the proof of the closed-form solution can be found in:</p>
<p>K. S. Arun, T. S. Huang, and S. D. Blostein. Least square fitting of two 3-d point sets.</p>
<p>IEEE Transactions on Pattern Analysis and Machine Intelligence, 9(5):698 – 700, 1987</p>
</section>

<section id="scan-alignment-with-unknown-correspondences" class="title-slide slide level1 center">
<h1>Scan alignment with unknown correspondences</h1>
<p><img data-src="img/Lecture6_160.png"></p>
<p><img data-src="img/Lecture6_161.png"></p>
<p>Main idea for data association:</p>
<p>associate each point in the source scan</p>
<p>to its nearest neighbor in the target scan</p>
<p>Find optimal rotation and translation</p>
<p>for this correspondence.</p>
<p>Repeat until no significant drop in error.</p>
</section>

<section id="libpointmatcher" class="title-slide slide level1 center">
<h1>libpointmatcher</h1>
<p><img data-src="img/Lecture6_162.png"></p>
<p><img data-src="img/Lecture6_163.png"></p>
</section>

<section id="todays-agenda-1" class="title-slide slide level1 center">
<h1>Today’s agenda</h1>
<p>How to represent maps</p>
<p>Probabilistic occupancy grid mapping</p>
</section>

<section id="what-we-want-to-do" class="title-slide slide level1 center">
<h1>What we want to do</h1>

<img data-src="img/Lecture6_164.png" class="r-stretch"></section>

<section id="terminology" class="title-slide slide level1 center">
<h1>Terminology</h1>
<p>Pose: the rotation and translation of a robot</p>
<p>Odometry: the transformation of the body frame with respect to its initial pose (fixed frame of reference).</p>
<p>Dynamics model: what is the next state given current state and control?</p>
<p>Sensor measurement model: what is the expected measurement given the robot’s current state?</p>
<p><img data-src="img/Lecture6_165.png"></p>
<p><img data-src="img/Lecture6_166.png"></p>
<p><img data-src="img/Lecture6_167.png"></p>
</section>

<section id="perfect-models-vs.-reality" class="title-slide slide level1 center">
<h1>Perfect models vs.&nbsp;Reality</h1>
<p><img data-src="img/Lecture6_168.png"></p>
<p><img data-src="img/Lecture6_169.png"></p>
<p><span style="color:#ff0000">Noise as a </span></p>
<p><span style="color:#ff0000">random variable</span></p>
<p><img data-src="img/Lecture6_170.png"></p>
<p><img data-src="img/Lecture6_171.png"></p>
<p><img data-src="img/Lecture6_172.png"></p>
<p><img data-src="img/Lecture6_173.png"></p>
<p><img data-src="img/Lecture6_174.png"></p>
<p><img data-src="img/Lecture6_175.png"></p>
<p><img data-src="img/Lecture6_176.png"></p>
<p>Sensor</p>
<p>Measurements</p>
<p><img data-src="img/Lecture6_177.png"></p>
<p><img data-src="img/Lecture6_178.png"></p>
<p><img data-src="img/Lecture6_179.png"></p>
<p><img data-src="img/Lecture6_180.png"></p>
<p>e.g. GPS (simplified)</p>
<p><img data-src="img/Lecture6_181.jpg"></p>
<p><img data-src="img/Lecture6_182.png"></p>
<p><img data-src="img/Lecture6_183.png"></p>
<p><img data-src="img/Lecture6_184.png"></p>
<p><img data-src="img/Lecture6_185.png"></p>
<p><img data-src="img/Lecture6_186.png"></p>
<p><img data-src="img/Lecture6_187.png"></p>
<p><img data-src="img/Lecture6_188.png"></p>
<p><img data-src="img/Lecture6_189.png"></p>
<p><img data-src="img/Lecture6_190.png"></p>
<p>probabilistic</p>
<p>dynamics model</p>
<p>Sensor</p>
<p>Measurements</p>
<p><img data-src="img/Lecture6_191.png"></p>
<p><img data-src="img/Lecture6_192.png"></p>
<p><img data-src="img/Lecture6_193.png"></p>
<p><img data-src="img/Lecture6_194.jpg"></p>
<p><img data-src="img/Lecture6_195.png"></p>
<p>e.g. GPS (simplified)</p>
<p>probabilistic</p>
<p>measurement model</p>
<p><img data-src="img/Lecture6_196.png"></p>
</section>

<section id="why-is-mapping-a-problem-dont-we-have-all-the-information-we-need-to-build-a-map" class="title-slide slide level1 center">
<h1>Why is mapping a problem?Don’t we have all the information we need to build a map?</h1>
<ul>
<li class="fragment">Two main sources of uncertainty:
<ul>
<li class="fragment">accumulating uncertainty in the dynamics</li>
</ul></li>
</ul>
<p><img data-src="img/Lecture6_197.png"></p>
<p><img data-src="img/Lecture6_198.png"></p>
<p><img data-src="img/Lecture6_199.png"></p>
<p><img data-src="img/Lecture6_200.png"></p>
<p>Uncertainty in the dynamics compounds into increasing uncertainty in odometry, as time passes.</p>
<p><img data-src="img/Lecture6_201.png"></p>
<ul>
<li class="fragment">Two main sources of uncertainty:
<ul>
<li class="fragment">uncertainty in the dynamics</li>
<li class="fragment">uncertainty in sensor measurements</li>
</ul></li>
</ul>
<p><img data-src="img/Lecture6_202.png"></p>
<ul>
<li class="fragment">Two main sources of uncertainty:
<ul>
<li class="fragment">uncertainty in the dynamics</li>
<li class="fragment">uncertainty in sensor measurements</li>
</ul></li>
</ul>
<p><img data-src="img/Lecture6_203.png"></p>
<p><img data-src="img/Lecture6_204.png"></p>
<p><img data-src="img/Lecture6_205.png"></p>
<p><span style="color:#ff0000">True value: 300cm</span></p>
<p><span style="color:#ff0000">but measurements have noise</span></p>
<ul>
<li class="fragment">If we had no uncertainty, i.e. and</li>
<li class="fragment">then mapping would be trivial.</li>
<li class="fragment">Today we will assume perfect dynamics and odometry, but noisy sensor</li>
<li class="fragment">measurements.</li>
<li class="fragment">We are also going to assume a static map, no moving objects</li>
</ul>
<p><img data-src="img/Lecture6_206.png"></p>
<p><img data-src="img/Lecture6_207.png"></p>
<p><img data-src="img/Lecture6_208.png"></p>
</section>

<section id="defining-the-problem" class="title-slide slide level1 center">
<h1>Defining the problem</h1>
<p>The occupancy grid map is a binary random variable</p>
<p><span style="color:#ff0000">width = #columns</span></p>
<p><span style="color:#ff0000">height = #rows</span></p>
<p><span style="color:#ff0000">of the occupancy grid</span></p>
<p><img data-src="img/Lecture6_209.png"></p>
<p>The occupancy grid map is a binary random variable</p>
<p>The path of the robot up to time t is a sequence of random variables</p>
<p>with</p>
<p><span style="color:#ff0000">width = #columns</span></p>
<p><span style="color:#ff0000">height = #rows</span></p>
<p><span style="color:#ff0000">of the occupancy grid</span></p>
<p><img data-src="img/Lecture6_210.png"></p>
<p><img data-src="img/Lecture6_211.png"></p>
<p><img data-src="img/Lecture6_212.png"></p>
<p><span style="color:#ff0000">Odometry</span> <span style="color:#ff0000"> coordinates </span></p>
<p>The occupancy grid map is a binary random variable</p>
<p>The path of the robot up to time t is a sequence of random variables</p>
<p>with</p>
<p>At each time step the robot makes a measurement (sonar/laser).</p>
<p>Measurements up to time t are a sequence of random variables</p>
<p>with</p>
<p><span style="color:#ff0000">width = #columns</span></p>
<p><span style="color:#ff0000">height = #rows</span></p>
<p><span style="color:#ff0000">of the occupancy grid</span></p>
<p><img data-src="img/Lecture6_213.png"></p>
<p><img data-src="img/Lecture6_214.png"></p>
<p><img data-src="img/Lecture6_215.png"></p>
<p><span style="color:#ff0000">Odometry</span> <span style="color:#ff0000"> coordinates </span></p>
<p><span style="color:#ff0000">K = #beams, or </span></p>
<p><span style="color:#ff0000">#points in the scan</span></p>
<p><img data-src="img/Lecture6_216.png"></p>
<p><img data-src="img/Lecture6_217.png"></p>
<p><span style="color:#ff0000">(range, angle) in </span></p>
<p><span style="color:#ff0000">the laser’s local </span></p>
<p><span style="color:#ff0000">coordinates </span></p>
</section>

<section id="the-goal-of-mapping" class="title-slide slide level1 center">
<h1>The goal of mapping</h1>
<p>To estimate the probability of any map, given path and measurements</p>
<p><img data-src="img/Lecture6_218.png"></p>
<p><span style="color:#ff0000">Sensor</span></p>
<p><span style="color:#ff0000">Measurements</span></p>
<p><span style="color:#ff0000">Odometry / Robot Poses</span></p>
<p>To estimate the probability of any map, given path and measurements</p>
<p>This is intractable. E.g. for a 100 x 100 grid there are possible binary maps.</p>
<p><img data-src="img/Lecture6_219.png"></p>
<p><img data-src="img/Lecture6_220.png"></p>
<p>To estimate the probability of any map, given path and measurements</p>
<p>This is intractable. E.g. for a 100 x 100 grid there are possible binary maps.</p>
<p>We can approximate</p>
<p><img data-src="img/Lecture6_221.png"></p>
<p><img data-src="img/Lecture6_222.png"></p>
<p><img data-src="img/Lecture6_223.png"></p>
<p><span style="color:#ff0000">Approximation ignores all dependencies</span></p>
<p><span style="color:#ff0000">between map cells, given known info. </span></p>
<p><span style="color:#ff0000">Assumes (for tractability) that cells are </span></p>
<p><span style="color:#ff0000">independent given path and measurements </span></p>
</section>

<section id="why-is-it-an-approximation" class="title-slide slide level1 center">
<h1>Why is it an approximation?</h1>
<p><img data-src="img/Lecture6_224.png"></p>
<p><img data-src="img/Lecture6_225.png"></p>
<p><span style="color:#ff0000">Resulting map when </span></p>
<p><span style="color:#ff0000">considering cells </span></p>
<p><span style="color:#ff0000">jointly</span></p>
<p><span style="color:#ff0000">Nearby </span></p>
<p><span style="color:#ff0000">measurements</span></p>
<p><span style="color:#ff0000">Resulting map when </span></p>
<p><span style="color:#ff0000">considering cells </span></p>
<p><span style="color:#ff0000">independently</span></p>
</section>

<section id="evaluating-the-occupancy-of-a-map-cell" class="title-slide slide level1 center">
<h1>Evaluating the occupancy of a map cell</h1>
<p>How do we evaluate ?</p>
<p><img data-src="img/Lecture6_226.png"></p>
<p>How do we evaluate ?</p>
<p><img data-src="img/Lecture6_227.png"></p>
<p><img data-src="img/Lecture6_228.png"></p>
<p>Conditional Bayes’ Rule</p>
<p><img data-src="img/Lecture6_229.png"></p>
<p>How do we evaluate ?</p>
<p>Using conditional Bayes’ rule we get</p>
<p><img data-src="img/Lecture6_230.png"></p>
<p><img data-src="img/Lecture6_231.png"></p>
<p><img data-src="img/Lecture6_232.png"></p>
<p>Conditional Bayes’ Rule</p>
<p><img data-src="img/Lecture6_233.png"></p>
<p>How do we evaluate ?</p>
<p>Using conditional Bayes’ rule we get</p>
<p>And we simplify</p>
<p><img data-src="img/Lecture6_234.png"></p>
<p><img data-src="img/Lecture6_235.png"></p>
<p>If C is independent of A</p>
<p>given B, then C provides</p>
<p>no extra information</p>
<p>about A after we know B</p>
<p><img data-src="img/Lecture6_236.png"></p>
<p><img data-src="img/Lecture6_237.png"></p>
<p>How do we evaluate ?</p>
<p>Using conditional Bayes’ rule we get</p>
<p>And we simplify</p>
<p><img data-src="img/Lecture6_238.png"></p>
<p><img data-src="img/Lecture6_239.png"></p>
<p><em>Current state without </em></p>
<p><em>current measurement provides</em></p>
<p><em>no additional information</em></p>
<p><em>about the occupancy of the map cell </em></p>
<p><span style="color:#ff0000">Current measurement</span></p>
<p><span style="color:#ff0000">only depends on current </span></p>
<p><span style="color:#ff0000">state and map cell </span></p>
<p><img data-src="img/Lecture6_240.png"></p>
<p>And we simplify:</p>
<p>Another way to write this:</p>
<p>Belief at time t-1 was updated to belief at time t based on likelihood of measurement received at time t.</p>
<p><img data-src="img/Lecture6_241.png"></p>
<p><img data-src="img/Lecture6_242.png"></p>
<p>And we simplify:</p>
<p>Another way to write this:</p>
<p><img data-src="img/Lecture6_243.png"></p>
<p><span style="color:#ff0000">So, as long as we can evaluate</span></p>
<p><span style="color:#ff0000">the measurement likelihood</span></p>
<p><span style="color:#ff0000">and the normalization factor</span></p>
<p><span style="color:#ff0000">we can do the belief update.</span></p>
<p><img data-src="img/Lecture6_244.png"></p>
<p><img data-src="img/Lecture6_245.png"></p>
<p><img data-src="img/Lecture6_246.png"></p>
<p>And we simplify:</p>
<p>Another way to write this:</p>
<p><img data-src="img/Lecture6_247.png"></p>
<p><span style="color:#ff0000">So, as long as we can evaluate</span></p>
<p><span style="color:#ff0000">the measurement likelihood</span></p>
<p><span style="color:#ff0000">and the normalization factor</span></p>
<p><span style="color:#ff0000">we can do the belief update.</span></p>
<p><img data-src="img/Lecture6_248.png"></p>
<p><img data-src="img/Lecture6_249.png"></p>
<p><img data-src="img/Lecture6_250.png"></p>
<p><em>Problem: this is hard to </em></p>
<p><em>compute. How can we avoid it?</em></p>
</section>

<section id="the-log-odds-trick-for-binary-random-variables" class="title-slide slide level1 center">
<h1>The log-odds trick for binary random variables</h1>
<p>We showed</p>
<p>Define the log odds ratio</p>
<p><img data-src="img/Lecture6_251.png"></p>
<p><img data-src="img/Lecture6_252.png"></p>
<p>We showed (1)</p>
<p>Define the log odds ratio</p>
<p><img data-src="img/Lecture6_253.png"></p>
<p><img data-src="img/Lecture6_254.png"></p>
<p>We showed (1)</p>
<p>Define the log odds ratio</p>
<p>Then (1) becomes</p>
<p><img data-src="img/Lecture6_255.png"></p>
<p><img data-src="img/Lecture6_256.png"></p>
<p><img data-src="img/Lecture6_257.png"></p>
<p>We showed (1)</p>
<p>Define the log odds ratio</p>
<p>Then (1) becomes</p>
<p>We can recover the original belief as</p>
<p><img data-src="img/Lecture6_258.png"></p>
<p><img data-src="img/Lecture6_259.png"></p>
<p><img data-src="img/Lecture6_260.png"></p>
<p><img data-src="img/Lecture6_261.png"></p>
<p>We showed (1)</p>
<p>Define the log odds ratio</p>
<p>Then (1) becomes</p>
<p><img data-src="img/Lecture6_262.png"></p>
<p><img data-src="img/Lecture6_263.png"></p>
<p><img data-src="img/Lecture6_264.png"></p>
<p><span style="color:#ff0000">So, as long as we can evaluate</span></p>
<p><span style="color:#ff0000">the log odds ratio for the measurement likelihood: </span></p>
<p><span style="color:#ff0000">we can do the belief update.</span></p>
<p><img data-src="img/Lecture6_265.png"></p>
</section>

<section id="log-odds-ratio-for-the-measurement-likelihood" class="title-slide slide level1 center">
<h1>Log-odds ratio for the measurement likelihood</h1>
<p>We want to compute to do the belief update</p>
<p>We apply conditional Bayes’ rule again:</p>
<p><img data-src="img/Lecture6_266.png"></p>
<p><img data-src="img/Lecture6_267.png"></p>
<p>We want to compute to do the belief update</p>
<p>We apply conditional Bayes’ rule again:</p>
<p>If we take the log-odds ratio:</p>
<p><img data-src="img/Lecture6_268.png"></p>
<p><img data-src="img/Lecture6_269.png"></p>
<p><img data-src="img/Lecture6_270.png"></p>
<p>We want to compute to do the belief update</p>
<p>We apply conditional Bayes’ rule again:</p>
<p>If we take the log-odds ratio:</p>
<p>We can simplify further:</p>
<p><img data-src="img/Lecture6_271.png"></p>
<p><img data-src="img/Lecture6_272.png"></p>
<p><img data-src="img/Lecture6_273.png"></p>
<p><span style="color:#ff0000">Knowing the current state provides no </span></p>
<p><span style="color:#ff0000">information about whether cell is </span></p>
<p><span style="color:#ff0000">occupied, if there are no observations</span></p>
<p><img data-src="img/Lecture6_274.png"></p>
<p>We want to compute to do the belief update</p>
<p>We apply conditional Bayes’ rule again:</p>
<p>If we take the log-odds ratio:</p>
<p>We can simplify further:</p>
<p><img data-src="img/Lecture6_275.png"></p>
<p><img data-src="img/Lecture6_276.png"></p>
<p><img data-src="img/Lecture6_277.png"></p>
<p><img data-src="img/Lecture6_278.png"></p>
<p><span style="color:#ff0000">Prior probability of cell being occupied.</span></p>
<p><span style="color:#ff0000">Can choose uniform distribution, for example.</span></p>
<p>We want to compute to do the belief update</p>
<p>We apply conditional Bayes’ rule again:</p>
<p>If we take the log-odds ratio:</p>
<p>We can simplify further:</p>
<p><img data-src="img/Lecture6_279.png"></p>
<p><img data-src="img/Lecture6_280.png"></p>
<p><img data-src="img/Lecture6_281.png"></p>
<p><span style="color:#ff0000">Inverse measurement model:</span></p>
<p><span style="color:#ff0000">what is the likelihood of the map</span></p>
<p><span style="color:#ff0000">cell being occupied given the current </span></p>
<p><span style="color:#ff0000">state and current measurement? </span></p>
<p><img data-src="img/Lecture6_282.png"></p>
</section>

<section id="summary-log-odds-ratio-for-the-measurement-likelihood" class="title-slide slide level1 center">
<h1>Summary: Log-odds ratio for the measurement likelihood</h1>
<p>We want to compute but it’s hard</p>
<p>Instead, we can compute the log-odds ratio of the measurement likelihood in terms of the inverse measurement model:</p>
<p><img data-src="img/Lecture6_283.png"></p>
<p><img data-src="img/Lecture6_284.png"></p>
<p><span style="color:#ff0000">Inverse measurement model:</span></p>
<p><span style="color:#ff0000">what is the likelihood of the map</span></p>
<p><span style="color:#ff0000">cell being occupied given the current </span></p>
<p><span style="color:#ff0000">state and current measurement? </span></p>
</section>

<section id="inverse-sensor-measurement-model" class="title-slide slide level1 center">
<h1>Inverse sensor measurement model</h1>
<p><img data-src="img/Lecture6_285.png"></p>
<p>Given map cell , the robot’s state , and beams</p>
<p><img data-src="img/Lecture6_286.png"></p>
<p><img data-src="img/Lecture6_287.png"></p>
<p><img data-src="img/Lecture6_288.png"></p>
<p>Find index k of sensor beam that is closest in heading to the cell</p>
<p><img data-src="img/Lecture6_289.png"></p>
<p><img data-src="img/Lecture6_290.png"></p>
<p><img data-src="img/Lecture6_291.png"></p>
<p>Given map cell , the robot’s state , and beams</p>
<p><img data-src="img/Lecture6_292.png"></p>
<p><img data-src="img/Lecture6_293.png"></p>
<p><img data-src="img/Lecture6_294.png"></p>
<p>Find index k of sensor beam that is closest in heading to the cell</p>
<p><img data-src="img/Lecture6_295.png"></p>
<p><img data-src="img/Lecture6_296.png"></p>
<p>If the cell is sufficiently closer than</p>
<p><img data-src="img/Lecture6_297.png"></p>
<p><img data-src="img/Lecture6_298.png"></p>
<p>// Cell is most likely free</p>
<p>Return that is well below 0.5</p>
<p><img data-src="img/Lecture6_299.png"></p>
<p><img data-src="img/Lecture6_300.png"></p>
<p>Given map cell , the robot’s state , and beams</p>
<p><img data-src="img/Lecture6_301.png"></p>
<p><img data-src="img/Lecture6_302.png"></p>
<p><img data-src="img/Lecture6_303.png"></p>
<p>Find index k of sensor beam that is closest in heading to the cell</p>
<p><img data-src="img/Lecture6_304.png"></p>
<p>If the cell is sufficiently farther than or out of the field of view</p>
<p><img data-src="img/Lecture6_305.png"></p>
<p><img data-src="img/Lecture6_306.png"></p>
<p>// We don’t have enough information to decide whether cell is occupied</p>
<p>Return prior occupation probability</p>
<p><img data-src="img/Lecture6_307.png"></p>
<p><img data-src="img/Lecture6_308.png"></p>
<p>If the cell is sufficiently closer than</p>
<p><img data-src="img/Lecture6_309.png"></p>
<p><img data-src="img/Lecture6_310.png"></p>
<p>// Cell is most likely free</p>
<p>Return that is well below 0.5</p>
<p><img data-src="img/Lecture6_311.png"></p>
<p><img data-src="img/Lecture6_312.png"></p>
<p>Given map cell , the robot’s state , and beams</p>
<p><img data-src="img/Lecture6_313.png"></p>
<p><img data-src="img/Lecture6_314.png"></p>
<p><img data-src="img/Lecture6_315.png"></p>
<p>Find index k of sensor beam that is closest in heading to the cell</p>
<p><img data-src="img/Lecture6_316.png"></p>
<p>If the cell is sufficiently farther than or out of the field of view</p>
<p><img data-src="img/Lecture6_317.png"></p>
<p><img data-src="img/Lecture6_318.png"></p>
<p>// We don’t have enough information to decide whether cell is occupied</p>
<p>Return prior occupation probability</p>
<p><img data-src="img/Lecture6_319.png"></p>
<p>If the cell is nearly as far as the measurement</p>
<p><img data-src="img/Lecture6_320.png"></p>
<p><img data-src="img/Lecture6_321.png"></p>
<p>// Cell is most likely occupied</p>
<p>Return that is well above 0.5</p>
<p><img data-src="img/Lecture6_322.png"></p>
<p><img data-src="img/Lecture6_323.png"></p>
<p>If the cell is sufficiently closer than</p>
<p><img data-src="img/Lecture6_324.png"></p>
<p><img data-src="img/Lecture6_325.png"></p>
<p>// Cell is most likely free</p>
<p>Return that is well below 0.5</p>
<p><img data-src="img/Lecture6_326.png"></p>
</section>

<section id="inverse_sensor_measurement_model-from-probabilistic-robotics-chapter-9.2" class="title-slide slide level1 center">
<h1>inverse_sensor_measurement_model( , , )From Probabilistic Robotics, chapter 9.2</h1>
<p><img data-src="img/Lecture6_327.png"></p>
<p><img data-src="img/Lecture6_328.png"></p>
<p><img data-src="img/Lecture6_329.png"></p>
<ul>
<li class="fragment">Let be the center of the cell</li>
<li class="fragment">Let</li>
<li class="fragment">Let // Might need to ensure this angle difference is in</li>
<li class="fragment">The index of the closest-in-heading beam to is</li>
<li class="fragment">If or
<ul>
<li class="fragment">Return the log odds ratio of the prior occupancy</li>
</ul></li>
<li class="fragment">If and
<ul>
<li class="fragment">Return the log odds ratio of being occupied (corresponding to occupation probability &gt; 0.5)</li>
</ul></li>
<li class="fragment">If
<ul>
<li class="fragment">Return the log odds ratio of being free (corresponding to occupation probability &lt; 0.5)</li>
</ul></li>
</ul>
<p><img data-src="img/Lecture6_330.png"></p>
<p><img data-src="img/Lecture6_331.png"></p>
<p><img data-src="img/Lecture6_332.png"></p>
<p><img data-src="img/Lecture6_333.png"></p>
<p><img data-src="img/Lecture6_334.png"></p>
<p><img data-src="img/Lecture6_335.png"></p>
<p><img data-src="img/Lecture6_336.png"></p>
<p><img data-src="img/Lecture6_337.png"></p>
<p><img data-src="img/Lecture6_338.png"></p>
<p><img data-src="img/Lecture6_339.png"></p>
<p><img data-src="img/Lecture6_340.png"></p>
<p><img data-src="img/Lecture6_341.png"></p>
<p><img data-src="img/Lecture6_342.png"></p>
</section>

<section id="recap" class="title-slide slide level1 center">
<h1>Recap</h1>
<p>We wanted to compute the likelihood of any map based on known states and observations</p>
<p><img data-src="img/Lecture6_343.png"></p>
<p>We wanted to compute the likelihood of any map based on known path and observations</p>
<p>To evaluate we had to apply Bayes’ theorem, which revealed a way to recursively update the belief</p>
<p><img data-src="img/Lecture6_344.png"></p>
<p><img data-src="img/Lecture6_345.png"></p>
<p><span style="color:#ff0000">Very frequent </span></p>
<p><span style="color:#ff0000">reasoning in </span></p>
<p><span style="color:#ff0000">probabilistic </span></p>
<p><span style="color:#ff0000">robotics</span></p>
<p><img data-src="img/Lecture6_346.png"></p>
<p>We wanted to compute the likelihood of any map based on known path and observations</p>
<p>To evaluate we had to apply Bayes’ theorem, which revealed a way to recursively update the belief</p>
<p>To avoid evaluating we used the log odds ratio</p>
<p><img data-src="img/Lecture6_347.png"></p>
<p><img data-src="img/Lecture6_348.png"></p>
<p><img data-src="img/Lecture6_349.png"></p>
<p><img data-src="img/Lecture6_350.png"></p>
<p><span style="color:#ff0000">Can do this for binary</span></p>
<p><span style="color:#ff0000">random variables</span></p>
<p><img data-src="img/Lecture6_351.png"></p>
<p>We wanted to compute the likelihood of any map based on known path and observations</p>
<p>To evaluate we had to apply Bayes’ theorem, which revealed a way to recursively update the belief</p>
<p>To avoid evaluating we used the log odds ratio</p>
<p>Computing the forward measurement model was hard, so we applied Bayes’ rule again, to get an inverse measurement model and an easier-to-compute log-odds ratio:</p>
<p><img data-src="img/Lecture6_352.png"></p>
<p><img data-src="img/Lecture6_353.png"></p>
<p><img data-src="img/Lecture6_354.png"></p>
<p><img data-src="img/Lecture6_355.png"></p>
<p><img data-src="img/Lecture6_356.png"></p>
<p><img data-src="img/Lecture6_357.png"></p>
<p><img data-src="img/Lecture6_358.png"></p>
<p><img data-src="img/Lecture6_359.png"></p>
</section>

<section id="occupancy-grid-algorithm" class="title-slide slide level1 center">
<h1>Occupancy Grid Algorithm</h1>
<p>Upon reception of a new laser/sonar/scan measurement</p>
<p>Let the robot’s current state be</p>
<p>Let the previous log-odds ratio of the occupancy belief be the 2D array where i is a row, j is a column</p>
<p>In the beginning we set the prior where the occupancy probability is a design decision.</p>
<p><img data-src="img/Lecture6_360.png"></p>
<p><img data-src="img/Lecture6_361.png"></p>
<p><img data-src="img/Lecture6_362.png"></p>
<p><img data-src="img/Lecture6_363.png"></p>
<ul>
<li class="fragment">Upon reception of a new laser/sonar/scan measurement</li>
<li class="fragment">Let the robot’s current state be</li>
<li class="fragment">Let the previous log-odds ratio of the occupancy belief be the 2D array where i is a row, j is a column</li>
<li class="fragment">In the beginning we set the prior where the occupancy probability is a design decision.</li>
<li class="fragment">For all cells (i,j) in the grid
<ul>
<li class="fragment">If the cell (i,j) is in the field of view of the robot’s sensor at state</li>
<li class="fragment">Else</li>
</ul></li>
<li class="fragment">If asked, return the following 2D matrix of occupancy probabilities:</li>
</ul>
<p><img data-src="img/Lecture6_364.png"></p>
<p><img data-src="img/Lecture6_365.png"></p>
<p><img data-src="img/Lecture6_366.png"></p>
<p><img data-src="img/Lecture6_367.png"></p>
<p><img data-src="img/Lecture6_368.png"></p>
<p><img data-src="img/Lecture6_369.png"></p>
<p><img data-src="img/Lecture6_370.png"></p>
<p><img data-src="img/Lecture6_371.png"></p>
</section>

<section id="results" class="title-slide slide level1 center">
<h1>Results</h1>
<p>The maximum likelihood map is obtained by clipping the occupancy grid map at a threshold of 0.5</p>



<img data-src="img/Lecture6_373.png" class="r-stretch"></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="img/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Organization</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/csc477\.github\.io\/website_fall24");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>